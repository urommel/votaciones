import{r as s,m as w,j as e,S as N,L as U}from"./app-DMpQA86v.js";import{A as M}from"./AuthenticatedLayout-C7SyfY9Z.js";import{B as x}from"./dialog-CZCOUsV5.js";import{I as h}from"./input-DwJfKTdf.js";import{z as j}from"./transition-BLyepPKn.js";import{y as v}from"./dialog-ChNpK4fS.js";import{d as D,m as b,F as R,a as T,C as _}from"./ConfirmDialog-CUOnWxoa.js";import{F as z}from"./PencilIcon-VtQjBVAG.js";import{f as A}from"./format-DF3zju1I.js";import{e as O}from"./es-DWfJTDW_.js";function $({title:r,titleId:i,...a},c){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":i},a),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const B=s.forwardRef($);function L({isOpen:r,onClose:i,user:a,mode:c}){const{data:d,setData:o,post:u,put:p,processing:g,errors:n,reset:m}=w({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",password:"",password_confirmation:""});s.useEffect(()=>{r&&o({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",password:"",password_confirmation:""})},[r,a]);const f=l=>{l.preventDefault(),c==="create"?u(route("users.store"),{onSuccess:()=>{m(),i()}}):p(route("users.update",a==null?void 0:a.id),{onSuccess:()=>{m(),i()}})};return e.jsx(j,{appear:!0,show:r,as:s.Fragment,children:e.jsxs(v,{as:"div",className:"relative z-50",onClose:i,children:[e.jsx(j.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(j.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(v.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-xl bg-white p-6 shadow-xl transition-all",children:[e.jsx(v.Title,{className:"text-xl font-semibold text-gray-900",children:c==="create"?"Nuevo Usuario":"Editar Usuario"}),e.jsxs("form",{onSubmit:f,className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nombre"}),e.jsx(h,{value:d.name,onChange:l=>o("name",l.target.value),placeholder:"Nombre completo"}),n.name&&e.jsx("p",{className:"text-sm text-red-600",children:n.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),e.jsx(h,{type:"email",value:d.email,onChange:l=>o("email",l.target.value),placeholder:"correo@ejemplo.com"}),n.email&&e.jsx("p",{className:"text-sm text-red-600",children:n.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Contraseña"}),e.jsx(h,{type:"password",value:d.password,onChange:l=>o("password",l.target.value),placeholder:c==="edit"?"Dejar en blanco para mantener":"********"}),n.password&&e.jsx("p",{className:"text-sm text-red-600",children:n.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Confirmar Contraseña"}),e.jsx(h,{type:"password",value:d.password_confirmation,onChange:l=>o("password_confirmation",l.target.value),placeholder:"********"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(x,{type:"button",onClick:i,className:"bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Cancelar"}),e.jsx(x,{type:"submit",disabled:g,className:"bg-theme-morado hover:bg-theme-morado/90",children:g?"Guardando...":c==="create"?"Crear":"Actualizar"})]})]})]})})})})]})})}function V({users:r,filters:i}){const[a,c]=s.useState(i.search),[d,o]=s.useState(!1),[u,p]=s.useState(null),[g,n]=s.useState(!1),[m,f]=s.useState(null),{delete:l}=w({}),C=s.useCallback(D(t=>{N.get(route("users.index"),{search:t},{preserveState:!0,preserveScroll:!0})},300),[]),S=t=>{c(t.target.value),C(t.target.value)},F=t=>{N.get(route("users.index",{page:t}),{search:a},{preserveState:!0})},E=t=>{f(t),n(!0)},k=()=>{m&&l(route("users.destroy",m.id))};return e.jsxs(M,{children:[e.jsx(U,{title:"Usuarios"}),e.jsxs("div",{className:"p-8",children:[e.jsxs(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Usuarios"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Gestiona los usuarios del sistema"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(h,{type:"search",placeholder:"Buscar usuarios...",value:a,onChange:S,className:"w-[300px] pl-10"}),e.jsx(R,{className:"absolute w-5 h-5 text-gray-400 -translate-y-1/2 left-3 top-1/2"})]}),e.jsxs(x,{onClick:()=>{p(null),o(!0)},className:"bg-theme-morado hover:bg-theme-morado/90 gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Nuevo Usuario"]})]})]}),e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 bg-white rounded-xl shadow-soft",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha Registro"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.data.map((t,y)=>e.jsxs(b.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:y*.05},className:"hover:bg-gray-50/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-theme-azul-oscuro",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A(new Date(t.created_at),"dd MMM yyyy",{locale:O})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx(x,{onClick:()=>{p(t),o(!0)},variant:"ghost",className:"p-1 mr-2 bg-transparent hover:bg-blue-50 group",children:e.jsx(z,{className:"w-[18px] h-[18px] text-black group-hover:text-blue-600"})}),e.jsx(x,{onClick:()=>E(t),variant:"ghost",className:"p-1 mr-2 bg-transparent hover:bg-red-50 group",children:e.jsx(T,{className:"w-[18px] h-[18px] text-black group-hover:text-red-600"})})]})]},t.id))})]})}),r.last_page>1&&e.jsx("div",{className:"px-6 py-4 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",r.from," a ",r.to," de ",r.total," usuarios"]}),e.jsx("div",{className:"flex gap-2",children:r.links.map((t,y)=>t.url===null?null:e.jsx(x,{onClick:()=>F(Number(t.label)),className:`${t.active?"bg-theme-morado border-theme-morado text-white hover:bg-theme-morado/90":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"} w-10 h-10 p-0 font-medium`,disabled:!t.url,children:t.label},y))})]})})]})]}),e.jsx(L,{isOpen:d,onClose:()=>{o(!1),p(null)},user:u||void 0,mode:u?"edit":"create"}),e.jsx(_,{isOpen:g,onClose:()=>n(!1),onConfirm:k,title:"Confirmar eliminación",message:`¿Estás seguro que deseas eliminar al usuario ${m==null?void 0:m.name}? Esta acción no se puede deshacer.`})]})}export{V as default};
