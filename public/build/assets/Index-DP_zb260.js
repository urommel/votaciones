import{m as E,r as x,j as e,S as C,L as A}from"./app-DMpQA86v.js";import{A as B}from"./AuthenticatedLayout-C7SyfY9Z.js";import{D as R,a as T,b as $,c as H,B as p}from"./dialog-CZCOUsV5.js";import{I as m}from"./input-DwJfKTdf.js";import{L as d}from"./label-FtF91ial.js";import{T as I}from"./textarea-COMWIroQ.js";import{S as L}from"./select-CRV2jmID.js";import{f as w}from"./format-DF3zju1I.js";import{d as O,m as v,F as z,a as U,C as P}from"./ConfirmDialog-CUOnWxoa.js";import{B as g}from"./badge-DAHxuvFS.js";import{F as q}from"./PlusIcon-CRYNvhOB.js";import{F as G}from"./PencilIcon-VtQjBVAG.js";import{e as J}from"./es-DWfJTDW_.js";function K({isOpen:c,onClose:h,evento:t,mode:n,estados:f}){const{data:l,setData:i,post:j,put:u,processing:y,errors:r,reset:o}=E({nombre:"",descripcion:"",fecha:w(new Date,"yyyy-MM-dd"),hora_inicio:"08:00",hora_fin:"18:00",estado:"programado",ubicacion:""});x.useEffect(()=>{c&&n==="edit"&&t?i({nombre:t.nombre,descripcion:t.descripcion||"",fecha:t.fecha,hora_inicio:t.hora_inicio,hora_fin:t.hora_fin,estado:t.estado,ubicacion:t.ubicacion||""}):c&&n==="create"&&(o("nombre","descripcion","ubicacion"),i(a=>({...a,fecha:w(new Date,"yyyy-MM-dd"),hora_inicio:"08:00",hora_fin:"18:00",estado:"programado"})))},[c,t,n]);const b=a=>{a.preventDefault(),n==="create"?j(route("eventos.store"),{onSuccess:()=>{o(),h()}}):u(route("eventos.update",t==null?void 0:t.id),{onSuccess:()=>{h()}})};return e.jsx(R,{open:c,onOpenChange:a=>!a&&h(),children:e.jsxs(T,{className:"sm:max-w-[550px]",children:[e.jsx($,{children:e.jsx(H,{children:n==="create"?"Nuevo Evento":"Editar Evento"})}),e.jsxs("form",{onSubmit:b,className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"nombre",children:["Nombre ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"nombre",value:l.nombre,onChange:a=>i("nombre",a.target.value),placeholder:"Ej: Reunión de Coordinación"}),r.nombre&&e.jsx("p",{className:"text-sm text-red-500",children:r.nombre})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"fecha",children:["Fecha ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"fecha",type:"date",value:l.fecha,onChange:a=>i("fecha",a.target.value)}),r.fecha&&e.jsx("p",{className:"text-sm text-red-500",children:r.fecha})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"estado",children:["Estado ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(L,{id:"estado",value:l.estado,onChange:a=>i("estado",a.target.value),children:f.map(a=>e.jsx("option",{value:a,children:a==="en_curso"?"En Curso":a.charAt(0).toUpperCase()+a.slice(1)},a))}),r.estado&&e.jsx("p",{className:"text-sm text-red-500",children:r.estado})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"hora_inicio",children:["Hora Inicio ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"hora_inicio",type:"time",value:l.hora_inicio,onChange:a=>i("hora_inicio",a.target.value)}),r.hora_inicio&&e.jsx("p",{className:"text-sm text-red-500",children:r.hora_inicio})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"hora_fin",children:["Hora Fin ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"hora_fin",type:"time",value:l.hora_fin,onChange:a=>i("hora_fin",a.target.value)}),r.hora_fin&&e.jsx("p",{className:"text-sm text-red-500",children:r.hora_fin})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"ubicacion",children:"Ubicación"}),e.jsx(m,{id:"ubicacion",value:l.ubicacion,onChange:a=>i("ubicacion",a.target.value),placeholder:"Ej: Aula 301, Edificio Central"}),r.ubicacion&&e.jsx("p",{className:"text-sm text-red-500",children:r.ubicacion})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(I,{id:"descripcion",value:l.descripcion,onChange:a=>i("descripcion",a.target.value),rows:3,placeholder:"Descripción del evento..."}),r.descripcion&&e.jsx("p",{className:"text-sm text-red-500",children:r.descripcion})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:h,children:"Cancelar"}),e.jsx(p,{type:"submit",disabled:y,variant:"default",className:"!bg-theme-verde hover:!bg-theme-verde/90",children:n==="create"?"Crear":"Actualizar"})]})]})]})})}function ne({eventos:c,filters:h,estados:t}){const[n,f]=x.useState(h.search),[l,i]=x.useState(!1),[j,u]=x.useState(null),[y,r]=x.useState(!1),[o,b]=x.useState(null),{delete:a}=E({}),_=x.useCallback(O(s=>{C.get(route("eventos.index"),{search:s},{preserveState:!0,preserveScroll:!0})},300),[]),S=s=>{f(s.target.value),_(s.target.value)},F=s=>{C.get(route("eventos.index",{page:s}),{search:n},{preserveState:!0})},D=s=>{b(s),r(!0)},k=()=>{o&&a(route("eventos.destroy",o.id))},M=s=>{switch(s){case"programado":return e.jsx(g,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Programado"});case"en_curso":return e.jsx(g,{className:"bg-green-100 text-green-800 border-green-200",children:"En Curso"});case"finalizado":return e.jsx(g,{className:"bg-gray-100 text-gray-800 border-gray-200",children:"Finalizado"});case"cancelado":return e.jsx(g,{className:"bg-red-100 text-red-800 border-red-200",children:"Cancelado"});default:return e.jsx(g,{className:"bg-gray-100 text-gray-800",children:s})}};return e.jsxs(B,{children:[e.jsx(A,{title:"Eventos"}),e.jsxs("div",{className:"p-8",children:[e.jsxs(v.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Eventos"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Gestiona los eventos y actividades"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(m,{type:"search",placeholder:"Buscar eventos...",value:n,onChange:S,className:"w-[300px] pl-10"}),e.jsx(z,{className:"absolute w-5 h-5 text-gray-400 -translate-y-1/2 left-3 top-1/2"})]}),e.jsxs(p,{onClick:()=>{u(null),i(!0)},className:"gap-2 !bg-theme-verde hover:!bg-theme-verde/90",children:[e.jsx(q,{className:"w-5 h-5"}),"Nuevo Evento"]})]})]}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 bg-white shadow-sm rounded-xl",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Horario"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Ubicación"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.data.map((s,N)=>e.jsxs(v.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:N*.05},className:"hover:bg-gray-50/50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:s.nombre}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:w(new Date(s.fecha),"dd MMM yyyy",{locale:J})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:[s.hora_inicio," - ",s.hora_fin]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:s.ubicacion||"—"}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:M(s.estado)}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[e.jsx(p,{onClick:()=>{u(s),i(!0)},variant:"ghost",className:"p-1 mr-2 bg-transparent hover:bg-blue-50 group",children:e.jsx(G,{className:"w-[18px] h-[18px] text-black group-hover:text-blue-600"})}),e.jsx(p,{onClick:()=>D(s),variant:"ghost",className:"p-1 mr-2 bg-transparent hover:bg-red-50 group",children:e.jsx(U,{className:"w-[18px] h-[18px] text-black group-hover:text-red-600"})})]})]},s.id))})]})}),c.last_page>1&&e.jsx("div",{className:"px-6 py-4 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",c.from," a ",c.to," de ",c.total," eventos"]}),e.jsx("div",{className:"flex gap-2",children:c.links.map((s,N)=>s.url===null?null:e.jsx(p,{onClick:()=>F(Number(s.label)),className:`${s.active?"bg-theme-verde border-theme-verde text-white hover:bg-theme-verde/90":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"} w-10 h-10 p-0 font-medium`,disabled:!s.url,children:s.label},N))})]})})]})]}),e.jsx(K,{isOpen:l,onClose:()=>{i(!1),u(null)},evento:j,mode:j?"edit":"create",estados:t}),e.jsx(P,{isOpen:y,onClose:()=>r(!1),onConfirm:k,title:"Confirmar eliminación",message:`¿Estás seguro que deseas eliminar el evento ${o==null?void 0:o.nombre}? Esta acción no se puede deshacer.`})]})}export{ne as default};
