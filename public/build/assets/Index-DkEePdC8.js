import{m as w,r,j as e,S as N,L as E}from"./app-DMpQA86v.js";import{A as D}from"./AuthenticatedLayout-C7SyfY9Z.js";import{B as d}from"./dialog-CZCOUsV5.js";import{I as v}from"./input-DwJfKTdf.js";import{z as f}from"./transition-BLyepPKn.js";import{y as b}from"./dialog-ChNpK4fS.js";import{d as M,m as j,F as T,a as z,C as R}from"./ConfirmDialog-CUOnWxoa.js";import{F as I}from"./PlusIcon-CRYNvhOB.js";import{f as O}from"./format-DF3zju1I.js";import{F as $}from"./PencilIcon-VtQjBVAG.js";import{e as B}from"./es-DWfJTDW_.js";function P({isOpen:s,onClose:o,area:a,mode:m}){const{data:u,setData:i,post:h,put:x,processing:g,errors:n,reset:l}=w({nombre:(a==null?void 0:a.nombre)||"",abreviatura:(a==null?void 0:a.abreviatura)||""});r.useEffect(()=>{s&&i({nombre:(a==null?void 0:a.nombre)||"",abreviatura:(a==null?void 0:a.abreviatura)||""})},[s,a]);const y=c=>{c.preventDefault(),m==="create"?h(route("areas.store"),{onSuccess:()=>{l(),o()}}):x(route("areas.update",a==null?void 0:a.id),{onSuccess:()=>{l(),o()}})};return e.jsx(f,{appear:!0,show:s,as:r.Fragment,children:e.jsxs(b,{as:"div",className:"relative z-50",onClose:o,children:[e.jsx(f.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex items-center justify-center min-h-full p-4",children:e.jsx(f.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(b.Panel,{className:"w-full max-w-md p-6 overflow-hidden transition-all transform bg-white shadow-xl rounded-xl",children:[e.jsx(b.Title,{className:"text-xl font-semibold text-gray-900",children:m==="create"?"Nueva Área":"Editar Área"}),e.jsxs("form",{onSubmit:y,className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nombre"}),e.jsx(v,{value:u.nombre,onChange:c=>i("nombre",c.target.value),placeholder:"Nombre del área"}),n.nombre&&e.jsx("p",{className:"text-sm text-red-600",children:n.nombre})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Abreviatura"}),e.jsx(v,{value:u.abreviatura,onChange:c=>i("abreviatura",c.target.value),placeholder:"Ej: MKT"}),n.abreviatura&&e.jsx("p",{className:"text-sm text-red-600",children:n.abreviatura})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(d,{type:"button",onClick:o,className:"text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancelar"}),e.jsx(d,{type:"submit",disabled:g,children:g?"Guardando...":m==="create"?"Crear":"Actualizar"})]})]})]})})})})]})})}function X({areas:s,filters:o}){const[a,m]=r.useState(o.search),[u,i]=r.useState(!1),[h,x]=r.useState(null),[g,n]=r.useState(!1),[l,y]=r.useState(null),{delete:c}=w({}),C=r.useCallback(M(t=>{N.get(route("areas.index"),{search:t},{preserveState:!0,preserveScroll:!0})},300),[]),S=t=>{m(t.target.value),C(t.target.value)},F=t=>{const p=parseInt(t,10)||t;N.get(route("areas.index",{page:p}),{search:a},{preserveState:!0})},k=t=>{y(t),n(!0)},A=()=>{l&&c(route("areas.destroy",l.id))};return e.jsxs(D,{children:[e.jsx(E,{title:"Áreas"}),e.jsxs("div",{className:"p-8",children:[e.jsxs(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Áreas"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Gestiona las áreas de trabajo de SEDIPRO"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{type:"search",placeholder:"Buscar áreas...",value:a,onChange:S,className:"w-[300px] pl-10"}),e.jsx(T,{className:"absolute w-5 h-5 text-gray-400 -translate-y-1/2 left-3 top-1/2"})]}),e.jsxs(d,{onClick:()=>{x(null),i(!0)},className:"gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Nueva Área"]})]})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 bg-white shadow-sm rounded-xl",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Abreviatura"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha Creación"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.data.map((t,p)=>e.jsxs(j.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:p*.05},className:"hover:bg-gray-50/50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:t.nombre}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-3 py-1 text-xs font-medium text-blue-800 bg-blue-100 rounded-full",children:t.abreviatura})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:O(new Date(t.created_at),"dd MMM yyyy",{locale:B})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[e.jsx(d,{onClick:()=>{x(t),i(!0)},variant:"ghost",className:"p-1 mr-2 bg-transparent hover:bg-blue-50 group",children:e.jsx($,{className:"w-[18px] h-[18px] text-black group-hover:text-blue-600"})}),e.jsx(d,{onClick:()=>k(t),variant:"ghost",className:"p-1 mr-2 bg-transparent hover:bg-red-50 group",children:e.jsx(z,{className:"w-[18px] h-[18px] text-black group-hover:text-red-600"})})]})]},t.id))})]})}),s.last_page>1&&e.jsx("div",{className:"px-6 py-4 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",s.from," a ",s.to," de ",s.total," áreas"]}),e.jsx("div",{className:"flex gap-2",children:s.links.map((t,p)=>t.url===null?null:e.jsx(d,{onClick:()=>F(t.label),className:`${t.active?"bg-theme-azul border-theme-azul text-white hover:bg-theme-azul/90":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"} w-10 h-10 p-0 font-medium`,disabled:!t.url,children:t.label},p))})]})})]})]}),e.jsx(P,{isOpen:u,onClose:()=>{i(!1),x(null)},area:h||void 0,mode:h?"edit":"create"}),e.jsx(R,{isOpen:g,onClose:()=>n(!1),onConfirm:A,title:"Confirmar eliminación",message:`¿Estás seguro que deseas eliminar el área ${l==null?void 0:l.nombre}? Esta acción no se puede deshacer.`})]})}export{X as default};
