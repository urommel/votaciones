import{m as N,r as o,j as e,S as y,L as F}from"./app-DMpQA86v.js";import{A as E}from"./AuthenticatedLayout-C7SyfY9Z.js";import{D as M,a as T,b as R,c as $,B as m}from"./dialog-CZCOUsV5.js";import{I as v}from"./input-DwJfKTdf.js";import{L as b}from"./label-FtF91ial.js";import{T as z}from"./textarea-COMWIroQ.js";import{d as A,m as j,F as L,a as O,C as B}from"./ConfirmDialog-CUOnWxoa.js";import{F as I}from"./PlusIcon-CRYNvhOB.js";import{F as P}from"./PencilIcon-VtQjBVAG.js";import{f as _}from"./format-DF3zju1I.js";import{e as q}from"./es-DWfJTDW_.js";function G({isOpen:a,onClose:d,cargo:t,mode:i}){const{data:p,setData:n,post:h,put:x,processing:u,errors:c,reset:l}=N({nombre:"",descripcion:""});o.useEffect(()=>{a&&i==="edit"&&t?n({nombre:t.nombre,descripcion:t.descripcion||""}):a&&i==="create"&&l("nombre","descripcion")},[a,t,i]);const g=r=>{r.preventDefault(),i==="create"?h(route("cargos.store"),{onSuccess:()=>{l(),d()}}):x(route("cargos.update",t==null?void 0:t.id),{onSuccess:()=>{d()}})};return e.jsx(M,{open:a,onOpenChange:r=>!r&&d(),children:e.jsxs(T,{className:"sm:max-w-[500px]",children:[e.jsx(R,{children:e.jsx($,{children:i==="create"?"Nuevo Cargo":"Editar Cargo"})}),e.jsxs("form",{onSubmit:g,className:"space-y-6 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"nombre",children:["Nombre ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{id:"nombre",value:p.nombre,onChange:r=>n("nombre",r.target.value),placeholder:"Ej: Presidente, Tesorero, etc."}),c.nombre&&e.jsx("p",{className:"text-sm text-red-500",children:c.nombre})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(z,{id:"descripcion",value:p.descripcion,onChange:r=>n("descripcion",r.target.value),rows:3,placeholder:"Descripción del cargo y sus responsabilidades..."}),c.descripcion&&e.jsx("p",{className:"text-sm text-red-500",children:c.descripcion})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(m,{type:"button",variant:"outline",onClick:d,children:"Cancelar"}),e.jsx(m,{type:"submit",disabled:u,children:i==="create"?"Crear":"Actualizar"})]})]})]})})}function se({cargos:a,filters:d}){const[t,i]=o.useState(d.search),[p,n]=o.useState(!1),[h,x]=o.useState(null),[u,c]=o.useState(!1),[l,g]=o.useState(null),{delete:r}=N({}),w=o.useCallback(A(s=>{y.get(route("cargos.index"),{search:s},{preserveState:!0,preserveScroll:!0})},300),[]),C=s=>{i(s.target.value),w(s.target.value)},S=s=>{y.get(route("cargos.index",{page:s}),{search:t},{preserveState:!0})},D=s=>{g(s),c(!0)},k=()=>{l&&r(route("cargos.destroy",l.id))};return e.jsxs(E,{children:[e.jsx(F,{title:"Cargos"}),e.jsxs("div",{className:"p-8",children:[e.jsxs(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Cargos"}),e.jsx("p",{className:"mt-1 text-gray-500",children:"Gestiona los cargos para las elecciones"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{type:"search",placeholder:"Buscar cargos...",value:t,onChange:C,className:"w-[300px] pl-10"}),e.jsx(L,{className:"absolute w-5 h-5 text-gray-400 -translate-y-1/2 left-3 top-1/2"})]}),e.jsxs(m,{onClick:()=>{x(null),n(!0)},className:"gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Nuevo Cargo"]})]})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 bg-white shadow-sm rounded-xl",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Descripción"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha Creación"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.data.map((s,f)=>e.jsxs(j.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:f*.05},className:"hover:bg-gray-50/50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:s.nombre}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:s.descripcion||"—"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:_(new Date(s.created_at),"dd MMM yyyy",{locale:q})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[e.jsx(m,{onClick:()=>{x(s),n(!0)},variant:"ghost",className:"p-1 mr-2 bg-transparent hover:bg-blue-50 group",children:e.jsx(P,{className:"w-[18px] h-[18px] text-black group-hover:text-blue-600"})}),e.jsx(m,{onClick:()=>D(s),variant:"ghost",className:"p-1 mr-2 bg-transparent hover:bg-red-50 group",children:e.jsx(O,{className:"w-[18px] h-[18px] text-black group-hover:text-red-600"})})]})]},s.id))})]})}),a.last_page>1&&e.jsx("div",{className:"px-6 py-4 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",a.from," a ",a.to," de ",a.total," cargos"]}),e.jsx("div",{className:"flex gap-2",children:a.links.map((s,f)=>s.url===null?null:e.jsx(m,{onClick:()=>S(Number(s.label)),className:`${s.active?"bg-theme-azul border-theme-azul text-white hover:bg-theme-azul/90":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"} w-10 h-10 p-0 font-medium`,disabled:!s.url,children:s.label},f))})]})})]})]}),e.jsx(G,{isOpen:p,onClose:()=>{n(!1),x(null)},cargo:h,mode:h?"edit":"create"}),e.jsx(B,{isOpen:u,onClose:()=>c(!1),onConfirm:k,title:"Confirmar eliminación",message:`¿Estás seguro que deseas eliminar el cargo ${l==null?void 0:l.nombre}? Esta acción no se puede deshacer.`})]})}export{se as default};
